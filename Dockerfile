# Используем официальный образ Go как базовый
FROM golang:1.23

# Устанавливаем рабочую директорию внутри контейнера
WORKDIR /app

# Копируем только файлы go.mod и go.sum для установки зависимостей
COPY go.mod go.sum ./

# Устанавливаем зависимости
RUN go mod download

# Копируем остальные файлы проекта в рабочую директорию
COPY . .

WORKDIR /app/cmd

# Сборка приложения
RUN go build -o main .

# Указываем, какой порт будет использоваться
EXPOSE 8080

# Команда для запуска приложения
CMD ["./main"]